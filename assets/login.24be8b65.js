import{_ as V}from"./nuxt-link.593d9ae7.js";import{s as j,f as z,r as $,v as M,l as n,o as A,c as C,b as s,w as o,m as L,i as e,d as _,a as v}from"./entry.be546a25.js";import{a as N}from"./useApiFetch.498b3bbb.js";import{u as B}from"./useAuthStore.31b8a659.js";import{u as E,a as f}from"./vee-validate.esm.20c2321f.js";const F=j("message",{state:()=>({text:"",timeout:5e3})}),T=v("h1",{class:"ma-2 pb-10"},"Kycu ne Sistem",-1),I={class:"text-subtitle-1 text-medium-emphasis d-flex align-center justify-space-between"},D=z({__name:"login",setup(K){const d=N(),u=B(),r=$(!1),{handleSubmit:g}=E({validationSchema:{email(a){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a)?!0:"Must be a valid e-mail."},password(a){return a&&a.length>=8?!0:"Password must be 8 chars or more"}}}),l=f("email"),m=f("password"),b=g(async a=>{if(a.email&&a.password){const t=F();await u.login({email:a.email,password:a.password}),u.isLoggedIn&&(t.text="Login Successful!",t.timeout=1e3,M("/")),setTimeout(()=>{t.$reset()},t.$state.timeout)}});return(a,t)=>{const w=n("v-card-title"),c=n("v-icon"),p=n("v-text-field"),x=n("v-btn"),h=n("v-form"),y=V,S=n("v-card"),k=n("v-row");return A(),C("div",null,[s(k,{align:"center",justify:"center",style:{height:"100vh"}},{default:o(()=>[s(S,{class:"mx-auto pa-12 pb-8",elevation:"8","max-width":"448",rounded:"lg",width:"500"},{default:o(()=>[s(w,{"primary-title":"",class:"d-flex align-center justify-center"},{default:o(()=>[T]),_:1}),s(h,{"validate-on":"submit lazy",onSubmit:L(e(b),["prevent"])},{default:o(()=>[s(p,{modelValue:e(l).value.value,"onUpdate:modelValue":t[0]||(t[0]=i=>e(l).value.value=i),"error-messages":e(l).errorMessage.value||e(d).$state.errors.email,id:"email",name:"email",type:"email",density:"compact",placeholder:"psh: kalabria@gmail.com",variant:"outlined",label:"Adresa e Email"},{"prepend-inner":o(()=>[s(c,{size:"xs-small",icon:"mdi-email"})]),_:1},8,["modelValue","error-messages"]),s(p,{modelValue:e(m).value.value,"onUpdate:modelValue":t[1]||(t[1]=i=>e(m).value.value=i),"error-messages":e(m).errorMessage.value||e(d).$state.errors.password,"append-inner-icon":e(r)?"mdi-eye-off":"mdi-eye",type:e(r)?"text":"password",id:"password",name:"password",density:"compact",variant:"outlined",placeholder:"Shtyp fjalekalimin",label:"Fjalekalimi","onClick:appendInner":t[2]||(t[2]=i=>r.value=!e(r))},{"prepend-inner":o(()=>[s(c,{size:"xs-small",icon:"mdi-lock-outline"})]),_:1},8,["modelValue","error-messages","append-inner-icon","type"]),s(x,{block:"",type:"submit",class:"mb-8",color:"blue",size:"large",variant:"tonal"},{default:o(()=>[_(" Hyr ")]),_:1})]),_:1},8,["onSubmit"]),v("div",I,[s(y,{to:"/forgot-password"},{default:o(()=>[_(" Ke harruar fjalekalimin? ")]),_:1})])]),_:1})]),_:1})])}}});export{D as default};
