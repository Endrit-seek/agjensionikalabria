import{s as i,P as r}from"./entry.85d85229.js";import{u as t}from"./useApiFetch.ce431889.js";const u=i("auth",{state:()=>({user:null,isLoading:!1}),getters:{isLoggedIn:a=>!!a.user},actions:{async fetchUser(){await t("/sanctum/csrf-cookie")},async login(a){await t("/sanctum/csrf-cookie");const e=await t("/api/login",{method:"POST",body:a});return e.error.value||(localStorage.setItem("token","Bearer "+e.data.value.token),await this.fetchUser()),e},async register(a){return await t("/sanctum/csrf-cookie"),await t("/api/register",{method:"POST",body:a})},async logout(){await t("/api/logout",{method:"POST"}),this.user=null,window.localStorage.removeItem("token")},async forgotPassword(a){await t("/sanctum/csrf-cookie"),await t("/api/forgot-password",{method:"POST",body:{email:a}})},async resetPassword(a,e,o,s){await t("/sanctum/csrf-cookie"),await t("/api/reset-password",{method:"POST",body:{email:a,password:e,password_confirmation:o,token:s}})},async reSendVerificationLink(){await t("/sanctum/csrf-cookie"),await t("/api/email/verification-notification",{method:"POST"}),await this.fetchUser()}},persist:{storage:r.localStorage}});export{u};
